<header>
  <div class="row">
    <div class="col-12">
      <h3>Select a Course</h3>
    </div>
  </div>
</header>

<div *ngIf="isLoading">
  <i class="fa fa-2x fa-spinner fa-pulse fa-fw"></i> Loading
</div>
<div *ngIf="!isLoading">

  <label for="selectedArtsArea" class="mt-4">Arts Area</label>
  <div class="default" [ngClass]="{disabledDiv: programsDisabled}">
    <div class="select">
      <select [(ngModel)]="selectedArtsArea"
              (change)="updateSessions()"
              name="selectedArtsArea"
              class="w-100"
              [disabled]="programsDisabled"
              id="selectedArtsArea">
        <option *ngFor="let artsArea of sortedArtsAreas" [value]="artsArea.value"
                [defaultSelected]="artsArea.defaultValue">{{ artsArea.label }}
        </option>
      </select>
    </div>
  </div>

  <div *ngIf="sortedSessions.length > 0">
    <label for="selectedSession" class="mt-4">Session</label>
    <div class="default" [ngClass]="{disabledDiv: programsDisabled}">
      <div class="select">
        <select [(ngModel)]="selectedSession"
                name="selectedSession"
                class="w-100"
                [disabled]="programsDisabled"
                id="selectedSession">
          <option *ngFor="let session of sortedSessions" [value]="session.value"
                  [defaultSelected]="session.defaultValue">{{ session.label }}
          </option>
        </select>
      </div>
    </div>
  </div>

  <div *ngIf="appData.programData.selectedDivision && sortedSessions.length === 0">
    There are currently no sessions available for this {{ appData.isAdultApplicant ? '' : 'Grade and ' }}Arts Area.
  </div>

  <div class="col-12 my-4" *ngIf="selectedPrograms.length > 0">
    <h5>Selected Courses</h5>
    <div *ngFor="let program of selectedPrograms" class="checkbox-container col-12 align-items-center d-flex my-3"
         [ngClass]="{disabled: program.isDisabled(daysSelectedBySession, programsDisabled, ListTypes.SELECTED)}">
      <div class="checkbox col-3 col-md-2 text-center" *ngIf="!program.isSaving"
           (click)="clickProgram(program, instrumentModal, ListTypes.SELECTED)">
        <input *ngIf="!program.isRegistered" type="checkbox" [id]="program.id" [name]="program.id"
               [checked]="program.isSelected"
               [disabled]="program.isDisabled(daysSelectedBySession, programsDisabled, ListTypes.SELECTED)">
        <label *ngIf="!program.isRegistered"
               [ngClass]="{disabled: program.isDisabled(daysSelectedBySession, programsDisabled, ListTypes.SELECTED)}">
          <i class="fa fa-check ps-4"></i>
        </label>
      </div>
      <div class="checkbox col-3 col-md-2 text-center" *ngIf="program.isSaving">
        <i class="fa fa-2x fa-spinner fa-pulse fa-fw"></i>
      </div>
      <div class="col-9 col-md-10 description">
        <h4>{{ program.name }}  {{ program.selectedInstrument }}</h4>
        <div>{{ program.sessionDates }}</div>
        <div *ngIf="program.daysDisplay">Meets on {{ program.daysDisplay }}</div>
        <div *ngIf="program.certificateGroupName"><i class="fa fa-info-circle"></i> Selected as part of {{program.certificateGroupName}}</div>
      </div>
    </div>
  </div>

  <div *ngIf="!appData.programData.selectedDivision" class="mt-4">
    Please use the filters above to view available courses.
  </div>

  <div class="col-12 my-4" *ngIf="appData.programData.selectedDivision">
    <h5>Available Courses <span *ngIf="!appData.isAdultApplicant"> for {{ selectedDivisionDescription }}</span></h5>
    <div *ngFor="let program of filteredPrograms" class="checkbox-container col-12 align-items-center d-flex my-3"
         (click)="clickProgram(program, instrumentModal, ListTypes.FILTERED)"
         [ngClass]="{disabled: program.isDisabled(daysSelectedBySession, programsDisabled, ListTypes.FILTERED)}">
      <div class="checkbox col-3 col-md-2 text-center" *ngIf="!program.isSaving">
        <input type="checkbox" [id]="program.id" [name]="program.id"
               [checked]="program.isSelected"
               [disabled]="program.isDisabled(daysSelectedBySession, programsDisabled, ListTypes.FILTERED)">
        <label [ngClass]="{disabled: program.isDisabled(daysSelectedBySession, programsDisabled, ListTypes.FILTERED)}">
          <i class="fa fa-check ps-4"></i>
        </label>
      </div>
      <div class="checkbox col-3 col-md-2 text-center" *ngIf="program.isSaving">
        <i class="fa fa-2x fa-spinner fa-pulse fa-fw"></i>
      </div>
      <div class="col-9 col-md-10 description">
        <h4>{{ program.name }}</h4>
        <div>{{ program.sessionDates }}</div>
        <div *ngIf="program.daysDisplay">Meets on {{ program.daysDisplay }}</div>
        <div *ngIf="program.certificateGroupName"><i class="fa fa-info-circle"></i> Selected as part of {{program.certificateGroupName}}</div>
      </div>
    </div>
  </div>
  <div *ngIf="appData.programData.selectedDivision && filteredPrograms.length === 0">
    There are no additional courses available for your selected session.
  </div>
</div>


<ng-template #instrumentModal let-modal>
  <div class="modal-header">
    <h4 *ngIf="isMusic" class="modal-title" id="modal-basic-title">Select an Instrument</h4>
    <button type="button" class="close btn btn-sm" aria-label="Close" (click)="modal.dismiss('Close clicked')">
      <span aria-hidden="true">
        <i class="fa fa-close fa-2x"></i>
      </span>
    </button>
  </div>
  <div class="modal-body">
    <div class="default required">
      <div *ngIf="isMusic" class="select">
        <select [(ngModel)]="modalInstrumentChoice"
                name="selectedInstrument"
                class="w-100"
                id="selectedInstrument">
          <option *ngFor="let instrument of selectedProgramInstruments" [value]="instrument.value"
                  [disabled]="instrument.disabled"
                  [defaultSelected]="instrument.defaultValue">{{ instrument.label }}
          </option>
        </select>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button *ngIf="isMusic" type="button" class="btn btn-primary"
            [disabled]="!modalInstrumentChoice"
            (click)="modal.close(modalInstrumentChoice)">Ok</button>

  </div>
</ng-template>
