<div class="col-12 my-4" *ngIf="selectedPrograms.length > 0">
  <h5>Selected Private Lessons</h5>
  <div *ngFor="let program of selectedPrograms" class="checkbox-container col-12 p-4 my-3"
       [ngClass]="{disabled: program.isDisabled(daysSelectedBySession, programsDisabled, ListTypes.SELECTED)}">
    <div class="d-flex align-items-end">
      <div class="checkbox col-2 col-xl-1" *ngIf="!program.isSaving"
           (click)="clickProgram(program, newLessonModal, ListTypes.SELECTED)">
        <input type="checkbox" [id]="program.id" [name]="program.id"
               [checked]="program.isSelected"
               [disabled]="program.isDisabled(daysSelectedBySession, programsDisabled, ListTypes.SELECTED)">
        <label class="clickable">
          <i class="fa fa-check ps-4"></i>
        </label>
      </div>
      <div class="checkbox col-2 col-xl-1" *ngIf="program.isSaving">
        <i class="fa fa-2x fa-spinner fa-pulse fa-fw"></i>
      </div>
      <div>
        <h4 class="m-0">{{ program.name }} {{ program.selectedInstrument }}</h4>
      </div>
    </div>
    <div class="col-12">
      <div class="list-group list-group-flush my-3">
        <div class="list-group-item">{{ program.lessonCount }} Lessons</div>
      </div>
      <div>
        <a href="javascript:void(0);" (click)="addLessons(program, addLessonsModal, ListTypes.SELECTED)"> Update
          Lessons</a>
      </div>
    </div>
  </div>
</div>

<div class="col-12 my-4">
  <h5>Available Private Lessons</h5>
  <div *ngFor="let program of filteredLessons"
       class="checkbox-container checkbox-container-clickable col-12 my-3 p-4"
       (click)="clickProgram(program, newLessonModal, ListTypes.FILTERED)"
       [ngClass]="{disabled: program.isDisabled(daysSelectedBySession, programsDisabled, ListTypes.FILTERED)}">
    <div class="d-flex align-items-end">
      <div class="checkbox col-2 col-xl-1" *ngIf="!program.isSaving">
        <input type="checkbox" [id]="program.id" [name]="program.id"
               [disabled]="program.isDisabled(daysSelectedBySession, programsDisabled, ListTypes.FILTERED)">
        <label [ngClass]="{disabled: program.isDisabled(daysSelectedBySession, programsDisabled, ListTypes.FILTERED)}">
          <i class="fa fa-check ps-4"></i>
        </label>
      </div>
      <div class="checkbox col-2 col-xl-1" *ngIf="program.isSaving">
        <i class="fa fa-2x fa-spinner fa-pulse fa-fw"></i>
      </div>
      <div>
        <h4 class="m-0">{{ program.name }}</h4>
      </div>
    </div>
  </div>
</div>

<ng-template #addLessonsModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="add-lesson-modal-basic-title">
      <span *ngIf="modalList === ListTypes.SELECTED">Adjust Lessons</span>
      <span *ngIf="modalList === ListTypes.REGISTERED">Select number of additional lessons</span>
    </h4>
    <button type="button" class="close btn btn-sm" aria-label="Close"
            (click)="modal.dismiss('Close clicked')">
      <span aria-hidden="true"><i class="fa fa-close fa-2x"></i></span>
    </button>
  </div>
  <div class="modal-body">
    <label *ngIf="modalList === ListTypes.SELECTED" for="lessonCountAdd" class="mt-4 required">Number of lessons</label>
    <label *ngIf="modalList === ListTypes.REGISTERED" for="lessonCountAdd" class="mt-4 required">
      Number of lessons</label>
    <div class="default required">
      <input type="number" class="w-25"
             [(ngModel)]="modalLessonCountAdd"
             name="lessonCountAdd"
             max="999"
             min="0"
             id="lessonCountAdd"/>
    </div>
  </div>
  <div class="modal-footer">

    <button *ngIf="modalList === ListTypes.SELECTED" type="button" class="btn btn-primary"
            [disabled]=" modalLessonCountAdd < 1"
            (click)="modal.close(modalInstrumentChoice)">Ok
    </button>
    <button *ngIf="modalList === ListTypes.REGISTERED" type="button" class="btn btn-primary"
            [disabled]=" modalLessonCountAdd < 1"
            (click)="modal.close(modalInstrumentChoice)">Ok
    </button>

  </div>
</ng-template>


<ng-template #newLessonModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="new-lesson-modal-basic-title">
      <span *ngIf="isMusic">Select an Instrument and Number of lessons</span>
      <span *ngIf="!isMusic">Select Number of lessons</span>
    </h4>
    <button type="button" class="close btn btn-sm" aria-label="Close" (click)="modal.dismiss('Close clicked')">
      <span aria-hidden="true"><i class="fa fa-close fa-2x"></i></span>
    </button>
  </div>
  <div class="modal-body">
    <label *ngIf="isMusic" for="selectedInstrument" class="mt-4 required">Instrument</label>
    <div *ngIf="isMusic" class="default required">
      <div class="select">
        <select [(ngModel)]="modalInstrumentChoice"
                name="selectedInstrument"
                class="w-100"
                id="selectedInstrument">
          <option *ngFor="let instrument of selectedProgramInstruments" [value]="instrument.value"
                  [disabled]="instrument.disabled"
                  [defaultSelected]="instrument.defaultValue">{{ instrument.label }}
          </option>
        </select>
      </div>

      <label *ngIf="isOtherInstrument" class="mt-4 required">Other Instrument</label>
      <div *ngIf="isOtherInstrument" class="default required">
        <input type="text" class="w-100"
               [(ngModel)]="otherInstrument"
               name="otherInstrument"
               id="otherInstrument"
               maxlength="50"/>
      </div>
    </div>

    <label for="lessonCount" class="mt-4 required">Add lessons</label>
    <div class="default required">
      <input type="number" class="w-25"
             [(ngModel)]="modalLessonCount"
             name="lessonCount"
             max="999" min="0"
             id="lessonCount"/>
    </div>
  </div>
  <div class="modal-footer">

    <button *ngIf="isMusic" type="button" class="btn btn-primary"
            [disabled]="(!modalInstrumentChoice || !modalLessonCount) || modalLessonCount < 1"
            (click)="closeNewLessonModal(modal)">Ok
    </button>
    <button *ngIf="!isMusic" type="button" class="btn btn-primary"
            [disabled]="!modalLessonCount || modalLessonCount < 1"
            (click)="closeNewLessonModal(modal)">Ok
    </button>

  </div>
</ng-template>
