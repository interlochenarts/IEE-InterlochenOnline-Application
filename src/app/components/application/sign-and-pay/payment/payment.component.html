<h3>Make a Payment</h3>

<div *ngIf="isLoading">
  <i class="fa fa-spinner fa-pulse fa-fw fa-2x"></i> Loading...
</div>
<div *ngIf="!isLoading">
  <div class="default" *ngIf="paymentReceived">
    You have already paid your registration fee.
  </div>
  <div *ngIf="!paymentReceived && appData.payment.amountOwed === 0.00 && appData.payment.appliedCredits <= 0">
    You must choose a program before you can pay.
  </div>
  <div *ngIf="!paymentReceived && appData.payment.spendableCredit > 0" class="mb-4">
    <label>Would you like to apply your Interlochen Arts Camp credit of
      {{(appData.payment.spendableCredit | currency:'USD')}} towards your registration fee?</label>
    <div class="default">
      <div class="form-check form-check-inline">
        <input type="radio"
               class="form-check-input"
               [(ngModel)]="appData.payment.useCredit"
               [disabled]="appData.payment.tuitionPaid"
               name="useCredit_Yes"
               id="useCredit_Yes"
               [value]="true"/>
        <label for="useCredit_Yes" class="form-check-label">Yes</label>
      </div>
      <div class="form-check form-check-inline">
        <input type="radio"
               class="form-check-input"
               [(ngModel)]="appData.payment.useCredit"
               [disabled]="appData.payment.tuitionPaid"
               name="useCredit_No"
               id="useCredit_No"
               [value]="false"/>
        <label for="useCredit_No" class="form-check-label">No</label>
      </div>
    </div>
    <button *ngIf="feeCoveredByCredit" class="btn btn-primary mt-4" (click)="confirmCredit()">Confirm</button>
  </div>
  <div *ngIf="!paymentReceived && canPay()">
    <label>Payment Method</label>
    <div class="default">
      <div class="form-check form-check-inline" *ngFor="let pt of PaymentType | keyvalue">
        <input type="radio"
               class="form-check-input"
               [(ngModel)]="paymentType"
               [disabled]="appData.payment.tuitionPaid"
               name="paymentType"
               id="paymentType_{{pt.key}}"
               value="{{pt.value}}"/>
        <label for="paymentType_{{pt.key}}" class="form-check-label">{{pt.value}}</label>
      </div>
    </div>
  </div>

  <iee-credit-card *ngIf="canPay() && paymentType === PaymentType.CC"></iee-credit-card>
  <iee-ach *ngIf="canPay() && paymentType === PaymentType.ACH" [useCredit]="appData.payment.useCredit"></iee-ach>
</div>
